# Complement-adder
24 bit complement adder
补码加法器设计文档
1 功能描述
补码加法器模块接收串行数据有效信号和24位串行补码数据（24位由高到低接收），若小于/大于/非连续输入24位视为无效，无输出。在输入最后一位数据之后，延迟三拍，输出 25位两组数据相加结果并输出相加有效信号（持续一拍时钟）。
2 设计描述
2.1 主模块
2.1.1功能描述
所设计的补码加法器模块共包含三个部分：A串转并模块、B串转并模块、加法器模块。具体功能如下：
1.	两个串转并模块，各自接收24位串行输入的补码数据（高位先入），转为两个24位并行数据，并在输出并行结果时输出一个并行数据有效信号。当输入数据小于/大于/非连续24位时，不输出并行结果和并行数据有效信号。
2.	当加法模块同步接收到两个并行24位数据，只有当两个串转并模块同时输出并行有效信号时，在一个时钟周期计算两路补码数据之和，并输出25位的相加结果和相加有效信号。

Port Name	     I/O  	位宽  	Description
时钟/复位信号
CpSl_Clk_i	   I	    1     	时钟信号
CpSl_Rst_iN	   I	    1	      复位信号，低有效

输入接口信号
CpSl_SerA_i	   I	    1	      串行输入信号A
CpSl_SerAVld_i I	    1	      串行输入有效信号，为1时A串行输入有效
CpSl_SerB_i    I	    1	      串行输入信号B
CpSl_SerBVld_i I	    1	      串行输入有效信号，为1时B串行输入有效

输出接口信号
CpSv_Sum_o	   O	    25	    25位并行相加结果
CpSl_SumVld_o	 O	    1	      相加有效信号，与相加结果同时输出，持续一个时钟周期

2.1.3时序描述
串行输入有效信号为1时，开始输入串行数据，在输入完最后1bit数据，延迟三拍时钟之后，输出并行相加结果和相加有效信号。

2.2 串并转换模块：

2.2.1 端口描述

Port Name	     I/O	     位宽	     Description
时钟/复位信号
CpSl_Clk_i	   I	       1	       时钟信号
CpSl_Rst_iN	   I	       1	       复位信号，低电平有效

输入接口
CpSl_Ser_i	   I	       1	       串行输入信号
CpSl_SerVld_i	 I	       1	       串行输入有效信号，为1时串行输入

输出接口
CpSv_Par_o	   O	       24	       并行输出数据，当判断输出数据为24位时输出
CpSl_ParVld_o	 O	       1	       并行有效信号，为1时输出并行数据

2.2.2 功能描述
1、串行输入有效信号为1，串行数据输入，寄存器移入一位数据，且计数器加1。
2、串行输入有效信号为1，寄存器中的数据左移，数据给寄存器低位赋值，每次往高位移一位，当串行输入有效信号为0，串行输入完成，判断输入的位数，为24位数时，输出一个并行结果和并行结果有效信号。
2.2.3 时序描述
当串行数据有效信号为1时，开始接收串行数据，在接收完最后1bit数据之后，延迟两拍时钟，输出并行结果和并行有效信号。

2.2.4 设计流程
Step1、串行数据输入：当串行输入有效信号为“1”时，输入串行数据（由高到低输入），寄存器从最低位开始存储，每存储一位数据，寄存器向左移动一位。
Step2、计算已输入串行数据位数：当串行输入有效信号为“1”，并且计数停止信号为“0”时，计数器加1，当串行输入有效信号为“0”或当计数停止信号为“1”时，计数器置零。
Step3、计数停止位：当计数器为“23”，串行输入有效信号为“1”时，计数停止信号置“1”，当串行输出有效信号为“0”时，计数停止信号置“0”。
Step4、串行数据输入24位标志位：当计数器为23时，串行输入有效信号为1时，24位数据写入完成，数据写入完成标志信号置1，当串行输入有效信号为0时，数据写入完成标志信号为0。
Step5、并行数据输出：当数据写入标志信号为1时，将寄存器存储的24位数据赋值给24位位宽的数据输出端口，输出24位并行输出数据，当数据写入标志信号为0时，输出置0。
Step6、并行数据有效信号输出：当数据写入标志信号为1时，将并行数据有效信号置1输出，当数据写入标志信号为0时，并行数据有效信号置0。

2.3 加法器模块

2.3.1端口描述
Port Name	     I/O	     位宽	     Description
时钟/复位信号
CpSl_Clk_i	   I	       1	       时钟信号
CpSl_Rst_iN	   I	       1	       复位信号，低电平有效

输入接口
CpSv_ParA_i	   I	       24	       并行24位加数A（二进制补码）
CpSl_ParAVld_i I	       1	       并行有效信号，为1代表A数据输入
CpSv_ParB_i	   I	       24	       并行24位加数B（二进制补码）
CpSl_ParBVld_i I	       1	       并行有效信号，为1代表B数据输入

输出接口
CpSv_Sum_o	   O	       25	       25位并行相加结果（二进制补码）
CpSl_SumVld_o	 O	       1	       相加有效信号，高电平有效，与相加结果同时输出

2.3.2功能描述
当接收两个并行有效信号同时为1时，将输入的两路24bit补码相加，输出25位相加结果，并输出相加有效信号。

2.3.4设计流程
Step1、加法运算：当同时接收到两路并行有效信号为“1”时，接收两路并行数据，给两路并行数据第25位补上各自的符号位，并进行加法运算，输出25位并行相加结果，持续一个时钟置零。
Step2、相加有效位输出：当同事接收到两路并行有效信号为“1”时，相加有效位置“1”输出，持续一个时钟置零。
